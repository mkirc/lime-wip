#! /bin/bash

defsfile="./Makefile.defs"

[ -e $defsfile ] && rm $defsfile
touch $defsfile

echo "LIB_QHULL = qhullstatic" >> $defsfile

qhull_incs=( "/usr/local/include/libqhull" "/usr/include/qhull" "/opt/local/include/qhull" "/sw/include/qhull" )

for incdir in ${qhull_incs[@]}
do
  if [ -e $incdir/qhull_a.h ]
  then
    echo "CCFLAGS += -I$incdir" >> $defsfile
    break
  fi
done

fitsio_incs=( "/usr/include/cfitsio" "/usr/include/libcfitsio0" "/home/mkirc/Documents/Physik/BA/LIME/include/include" )

for incdir in ${fitsio_incs[@]}
do
  if [ -e $incdir/fitsio.h ]
  then
    echo "CCFLAGS += -I$incdir" >> $defsfile
    break
  fi
done

hdf5libdir=/home/mkirc/BA/LIME/include/hdf5-1.14.2/hdf5/include

if [ -e $hdf5libdir/hdf5.h ]; then
    echo "CCFLAGS += -I$hdf5libdir" >> $defsfile
fi


pybin="python3"
pyconf="$pybin-config"
command -v $pyconf >/dev/null 2>&1 || ! echo "oops" || exit 3

PYCCFLAGS=`$pyconf --cflags`
PYLDFLAGS=`$pyconf --ldflags`
echo "PYCCFLAGS = $PYCCFLAGS" >> $defsfile
echo "PYLDFLAGS = $PYLDFLAGS" >> $defsfile

